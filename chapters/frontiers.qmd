---
title: "Frontiers"
author: "Claudiu Forgaci"
---

This chapter explores emerging frontiers in urban morphology: urban morphometrics, spatial morphology, and spatial data science. Urban morphometrics is a quantitative field aiming at extracting patterns from large amounts of morphological data; spatial morphology expands the field to the analysis of unbuilt space mostly using space syntax theory and landscape ecology principles; spatial data science as a cross-cutting field increasingly adopts urban morphological information to enrich the understanding of spatial phenomena of environmental, social and economic kind.

![VOSviewer visualization of keyword co-occurrence from a dataset exported from Scopus on 30 October 2025 using the query "urban morpho*".](../images/scopus_clusters.png)

```{r}
# load packages
library(leaflet)
library(sf)
library(mapview)
library(here)
library(raster)
library(magrittr)
library(leafsync)

# load morphology data
buildings <- st_read(here("data-for-map/delft_buildings.gpkg")) |> st_transform(4326)

# load maps
map1 <- leaflet() |>
  addProviderTiles("CartoDB.Positron") |>
  setView(lng = 4.3571, lat = 52.0116, zoom = 13) |>  # Delft coordinates
  addPolygons(
    data = buildings,
    color = "orange",
    weight = 0.2,
    opacity = 1,
    fillOpacity = 1,
    group = "Buildings",
    popup = ~paste("gebruiksdoel", ifelse(!is.na(gebruiksdoel), gebruiksdoel, "N/A"))
  ) |>
  addScaleBar(position = "bottomleft") |>
  addMiniMap(toggleDisplay = TRUE) |>
  addLayersControl(
    baseGroups = c("Base Map"),
    overlayGroups = c("Buildings"),
    options = layersControlOptions(collapsed = FALSE)
  )

map2 <- leaflet() |>
  addProviderTiles("Esri.WorldImagery", group = "Satellite (Esri)") |>
  setView(lng = 4.3571, lat = 52.0116, zoom = 13) |>
  addScaleBar(position = "bottomleft")

leafsync::sync(map1,map2)

```


```{r}
library(leaflet)

# Function to get historical map layer for a specific year
get_historical_layer <- function(year) {
  url_template <- paste0(
    "https://tiles.arcgis.com/tiles/nSZVuSZjHpEZZbRo/arcgis/rest/services/",
    "Historische_tijdreis_", year, "/MapServer/tile/{z}/{y}/{x}?blankTile=false"
  )
  
  return(url_template)
}

# Create leaflet map with historical layer
create_historical_map <- function(year = 1881, center = c(52.1326, 5.2913), zoom = 8) {
  leaflet() %>%
    addTiles() %>%  # Add OpenStreetMap as base
    addTiles(
      urlTemplate = get_historical_layer(year),
      options = tileOptions(
        minZoom = 3,
        maxZoom = 16,
        attribution = paste("Â© Kadaster", year)
      ),
      layerId = "historical"
    ) %>%
    setView(lng = center[2], lat = center[1], zoom = zoom)
}

# Create map for 1881
map_1881 <- create_historical_map(1881)
map_1881

```



